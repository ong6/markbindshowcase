
    var pageVueRenderFn = function anonymous(
) {
with(this){return _c('div',{attrs:{"id":"app"}},[_c('header',{attrs:{"fixed":""}},[_c('navbar',{attrs:{"placement":"top","type":"inverse"},scopedSlots:_u([{key:"brand",fn:function(){return [_c('a',{staticClass:"navbar-brand",attrs:{"href":"/index.html","title":"Home"}},[_c('i',{staticClass:"far fa-file-image"})])]},proxy:true},{key:"right",fn:function(){return [_c('li',[_c('form',{staticClass:"navbar-form"},[_c('searchbar',{attrs:{"data":searchData,"placeholder":"Search","on-hit":searchCallback,"menu-align-right":""}})],1)])]},proxy:true}])},[_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"href":"/index.html"}},[_v("HOME")])]),_v(" "),_c('li',[_c('a',{staticClass:"nav-link",attrs:{"href":"/about.html"}},[_v("ABOUT")])])])],1),_v(" "),_c('div',{attrs:{"id":"flex-body"}},[_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"site-nav","tag-name":"nav","to":"site-nav"}},[_c('div',{staticClass:"site-nav-top"},[_c('div',{staticClass:"font-weight-bold mb-2",staticStyle:{"font-size":"1.25rem"}},[_v("Template")])]),_v(" "),_c('div',{staticClass:"nav-component slim-scroll"},[_c('site-nav',[_c('overlay-source',{staticClass:"site-nav-list site-nav-list-root",attrs:{"tag-name":"ul","to":"mb-site-nav"}},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/CONTRIBUTING.html"}},[_v("CONTRIBUTING")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/README.html"}},[_v("README")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/about.html"}},[_v("About")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/best-practices%5Ccoding.html"}},[_v("Coding")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/best-practices%5Cdata-migration.html"}},[_v("Data Migration")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/best-practices%5Ctesting.html"}},[_v("Testing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/best-practices%5Cui-design.html"}},[_v("Ui Design")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/captcha.html"}},[_v("Captcha")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/contents%5Ctopic1.html"}},[_v("Topic 1")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/contents%5Ctopic2.html"}},[_v("Topic 2")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/contents%5Ctopic3a.html"}},[_v("Topic 3 A")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/contents%5Ctopic3b.html"}},[_v("Topic 3 B")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/design.html"}},[_v("Design")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/development.html"}},[_v("Development")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/e2e-testing.html"}},[_v("E 2 E Testing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/emails.html"}},[_v("Emails")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/glossary.html"}},[_v("Glossary")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/index.html"}},[_v("Index")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/issues.html"}},[_v("Issues")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/overview.html"}},[_v("Overview")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/performance-testing.html"}},[_v("Performance Testing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/process.html"}},[_v("Process")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/search.html"}},[_v("Search")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/setting-up.html"}},[_v("Setting Up")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/snapshot-testing.html"}},[_v("Snapshot Testing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/static-analysis.html"}},[_v("Static Analysis")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"/markbindshowcase/troubleshooting-guide.html"}},[_v("Troubleshooting Guide")])])])]),_v(" "),_c('pre',[_c('code',{pre:true},[_v("  </site-nav>\n</div>\n")])]),_v(" "),_c('div',{staticClass:"fixed-header-padding",attrs:{"id":"content-wrapper"}},[_c('h1',{attrs:{"id":"data-migration-best-practices"}},[_c('span',{staticClass:"anchor",attrs:{"id":"data-migration-best-practices"}}),_v("Data Migration Best Practices"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#data-migration-best-practices","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("Data migration is necessary when a new, possibly backwards-incompatible, schema\nis introduced in the code base.")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"#data-migration-best-practices"}},[_v("Data Migration Best Practices")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"#making-code-work-for-both-schemas"}},[_v("Making code work for both schemas")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"#interchangeability-between-consecutive-versions"}},[_v("Interchangeability between consecutive versions")])])])])]),_v(" "),_c('h2',{attrs:{"id":"making-code-work-for-both-schemas"}},[_c('span',{staticClass:"anchor",attrs:{"id":"making-code-work-for-both-schemas"}}),_v("Making code work for both schemas"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#making-code-work-for-both-schemas","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("Initially, the breaking change should be written such that it works for both the\nold data schema and the new data schema. This can be done in two ways:")]),_v(" "),_c('ul',[_c('li',[_c('p',[_v("Using\n"),_c('a',{attrs:{"href":"https://github.com/objectify/objectify/wiki/LifecycleCallbacks"}},[_v("Objectify lifecycle annotation "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("@OnLoad")])])]),_v(" "),_c('ul',[_c('li',[_v("In this lifecycle call, one could convert data in the old schema to the new\nschema.")]),_v(" "),_c('li',[_v("However, it would be difficult to write client script to migrate the old\nschema to the new schema as all entities loaded by Objectify in the client\nscript will be in new data schema because of the lifecycle call. Therefore,\nit is hard to differentiate the data in old schema and the data in new\nschema.")])])]),_v(" "),_c('li',[_c('p',[_v("Using Getter and Setter")]),_v(" "),_c('ul',[_c('li',[_v("This is the "),_c('strong',[_v("recommended")]),_v(" way to convert data from the old schema to the\nnew schema. It allows you to storage data in the new schema without knowing\nthe underlying data schema.")]),_v(" "),_c('li',[_v("In doing this, data migration script can use Java Reflection to determine\nwhether it is old data or not and convert it accordingly.")])])])]),_v(" "),_c('h2',{attrs:{"id":"interchangeability-between-consecutive-versions"}},[_c('span',{staticClass:"anchor",attrs:{"id":"interchangeability-between-consecutive-versions"}}),_v("Interchangeability between consecutive versions"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#interchangeability-between-consecutive-versions","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("It is undeniable that the version using old data schema should be\ninterchangeable with the immediate next version using the new data schema. This\nis why it is important to write code that works for both schemas.")]),_v(" "),_c('p',[_v("In addition, it is also important to make sure the code work for both the\nversion tailored for the old data schema and the "),_c('strong',[_v("immediate")]),_v(" next version\nwithout hacks of the old schema.")]),_v(" "),_c('p',[_v("For example, a field "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("isInNewDataSchema")]),_v(" is introduced to take care of the old\nschema. It will be imprudent to remove the field in the immediate next version\nafter the client script is run as all data generated by the new version will\nhave this field missing and be "),_c('em',[_v("wrongly")]),_v(" treated as data in old schema in the\nold version. In the immediate next version, the field should be marked to "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("true")]),_v("\nalthough it has no usage. In the version after the immediate next version, the\nfield can be safely removed. That is, we should make any two consecutive\nversions interchangeable at "),_c('strong',[_v("ALL")]),_v(" times.")]),_v(" "),_c('i',{staticClass:"fa fa-arrow-circle-up fa-lg d-print-none",attrs:{"id":"scroll-top-button","onclick":"handleScrollTop()","aria-hidden":"true"}})]),_v(" "),_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"page-nav","tag-name":"nav","to":"page-nav"}},[_c('div',{staticClass:"nav-component slim-scroll"},[_c('a',{staticClass:"navbar-brand page-nav-title",attrs:{"href":"#"}},[_v("Chapters of This Page")]),_v(" "),_c('overlay-source',{staticClass:"nav nav-pills flex-column my-0 small no-flex-wrap",attrs:{"id":"mb-page-nav","tag-name":"nav","to":"mb-page-nav"}},[_c('a',{staticClass:"nav-link py-1",attrs:{"href":"#data-migration-best-practices"}},[_v("Data Migration Best Practices‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{staticClass:"nav-link py-1",attrs:{"href":"#making-code-work-for-both-schemas"}},[_v("Making code work for both schemas‎")]),_v(" "),_c('a',{staticClass:"nav-link py-1",attrs:{"href":"#interchangeability-between-consecutive-versions"}},[_v("Interchangeability between consecutive versions‎")])])])],1)]),_v(" "),_c('footer',[_c('div',{staticClass:"text-center"},[_c('small',[_v("[Generated by ]")])])])],1)],1)])],1)])}
};
    var pageVueStaticRenderFns = [];
  